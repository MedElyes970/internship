# Category Management System

This document explains how to use the new category management system in the admin dashboard.

## Features

- ✅ **Add Categories**: Create new product categories with automatic slug generation
- ✅ **View Categories**: See all categories in a beautiful grid layout
- ✅ **Delete Categories**: Remove categories with confirmation
- ✅ **Firebase Integration**: All data is stored in Firebase Firestore
- ✅ **Real-time Updates**: Categories are automatically refreshed after operations
- ✅ **Validation**: Input validation and error handling
- ✅ **Toast Notifications**: User feedback for all operations

## How to Use

### 1. Adding a Category

1. Navigate to **Categories** in the sidebar
2. Click **Add Category** button
3. Fill in the form:
   - **Category Name**: Required, max 50 characters
   - **Description**: Optional, provides context about the category
4. Click **Add Category**
5. The system will:
   - Generate a URL-friendly slug automatically
   - Validate the input
   - Check for duplicate names
   - Save to Firebase
   - Show success/error feedback

### 2. Viewing Categories

- Go to **Categories** → **See All Categories**
- Categories are displayed in a responsive grid
- Each category shows:
  - Name and description
  - Generated slug
  - Creation date
  - Edit/Delete actions

### 3. Managing Categories

- **Edit**: Currently shows placeholder (to be implemented)
- **Delete**: Removes category with confirmation dialog
- **Statistics**: View total count and other metrics

## Technical Details

### Firebase Collection

Categories are stored in the `categories` collection with the following structure:

```typescript
interface Category {
  id?: string;           // Auto-generated by Firestore
  name: string;          // Display name (max 50 chars)
  slug: string;          // URL-friendly identifier (max 50 chars)
  description?: string;  // Optional description
  createdAt?: any;       // Firestore timestamp
  updatedAt?: any;       // Firestore timestamp
}
```

### API Functions

```typescript
// Add a new category
addCategory(categoryData: Omit<Category, 'id' | 'createdAt' | 'updatedAt'>)

// Get all categories
getCategories(): Promise<Category[]>

// Update a category
updateCategory(id: string, updates: Partial<Category>)

// Delete a category
deleteCategory(id: string)

// Generate slug from name
generateSlug(name: string): string

// Check slug uniqueness
isSlugUnique(slug: string, excludeId?: string): Promise<boolean>
```

### Slug Generation

Slugs are automatically generated from category names:
- Convert to lowercase
- Remove special characters
- Replace spaces with hyphens
- Remove leading/trailing hyphens
- Limit to 50 characters

Example: "Video Surveillance" → "video-surveillance"

## Error Handling

The system includes comprehensive error handling:
- Input validation
- Duplicate slug detection
- Firebase operation errors
- User-friendly error messages
- Toast notifications for feedback

## Future Enhancements

- [ ] Edit category functionality
- [ ] Category image uploads
- [ ] Category hierarchy (parent/child relationships)
- [ ] Bulk operations
- [ ] Category usage statistics
- [ ] Category templates

## Security Rules

Make sure your Firebase security rules allow authenticated users to:
- Read categories
- Create categories (admin only)
- Update categories (admin only)
- Delete categories (admin only)

Example Firestore rules:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /categories/{categoryId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
  }
}
```

## Troubleshooting

### Common Issues

1. **"Failed to add category"**
   - Check Firebase connection
   - Verify authentication
   - Check console for detailed errors

2. **"Category already exists"**
   - The name or generated slug conflicts with existing category
   - Try a different name

3. **Categories not loading**
   - Check Firebase permissions
   - Verify internet connection
   - Check browser console for errors

### Debug Mode

Enable debug logging by checking the browser console for detailed error messages and operation logs.
